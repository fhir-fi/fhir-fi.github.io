{"version":3,"file":"component---src-pages-background-js-b7d5c5976c60dd08054c.js","mappings":"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","sources":["webpack://fhir-demo-2025/./src/pages/background.js"],"sourcesContent":["import * as React from 'react';\n\nconst Leaf = ({ fading = false, generation, rotate, scale, x, y }) => {\n  const [isFading, setFading] = React.useState(false);\n\n  React.useLayoutEffect(() => {\n    if (fading) {\n      setFading(false);\n      setTimeout(() => {\n        setFading(true);\n      }, 500);\n    }\n  }, [generation, fading]);\n\n  return (\n    <g key={`generation${generation}`} transform={`translate(${x},${y})`}>\n      <path\n        className={`${(fading && !isFading) ? 'about-to-fade ' : (isFading ? 'fading ' : '')}leaf`}\n        transform={`scale(${scale}) rotate(${rotate})`}\n        d=\"M20,0 a10 10 0 0 1 0 20 a10 10 0 0 1 -20 0 v-20 Z\"\n      />\n    </g>\n  );\n};\n\nconst Flower = ({fading = false, generation, remove = f => f, rotate, scale, x, y }) => {\n  const [isFading, setFading] = React.useState(false);\n\n  React.useEffect(() => {\n    if (fading) {\n      setTimeout(() => {\n        setFading(true);\n      }, 500);\n    }\n  });\n\n  return (\n    <g key={`generation${generation}`} transform={`translate(${x},${y})`}>\n      <path\n        className={`${isFading ? 'fading ' : ''}flower`}\n        transform={`scale(${scale}) rotate(${rotate})`}        \n        d=\"M0,0 a10 10 0 0 1 0 20 a10 10 0 0 1 -20 0 a10 10 0 0 1 0 -20 a10 10 0 0 1 20 0 Z\"\n        onTransitionEnd={isFading ? (e) => {\n          if (e.propertyName === 'fill-opacity') {\n            remove();\n          }\n         } : f => f}\n      />\n    </g>\n  );\n};\n\nconst Plant = ({ animated, animationDuration, height, width }) => {\n  const lineLength = height / 5;\n  const strokeWidth = 3;\n\n  const flowerGeneration = React.useRef(0);\n  const leafGeneration = React.useRef(0);\n  const animationListener = React.useRef(null);\n\n  const [flowerScale, setFlowerScale] = React.useState(1);\n  const [leafScale, setLeafScale] = React.useState(0.4);\n\n  const [rootStalkPath, setRootStalkPath] = React.useState('M0,0');\n  const [flower, setFlower] = React.useState(undefined);\n  const [clonedFlower, setClonedFlower] = React.useState(undefined);\n  const [branches, setBranches] = React.useState([]);\n  const [leaves, setLeaves] = React.useState([]);\n  const [clonedLeaves, setClonedLeaves] = React.useState([]);\n  const [dotPaths, setDotPaths] = React.useState([]);\n\n  React.useEffect(() => {\n    function getRandomCoord({ x, y, direction, short }) {\n      let distance = lineLength * (short ? 0.5 : 1) * ((Math.random() * 0.5) + 0.4);\n      let x1 = -1;\n      let y1 = -1;\n      let counter = 0;\n      while (x1 <= strokeWidth\n        || x1 >= (width - strokeWidth)\n        || y1 <= strokeWidth\n        || y1 >= (height - strokeWidth)) {\n        if (counter++ > 10) {\n          // Too difficult, we're in a tough corner...\n          return { x, y, direction};\n        }\n        // distance = distance / counter;\n        switch (direction) {\n          case 0:\n            x1 = x;\n            y1 = y - distance;\n            break;\n          case 1:\n            x1 = x + distance;\n            y1 = y - distance;\n            break;\n          case 2:\n            x1 = x + distance;\n            y1 = y;\n            break;\n          case 3:\n            x1 = x + distance;\n            y1 = y + distance;\n            break;\n          case 4:\n            x1 = x;\n            y1 = y + distance;\n            break;\n          case 5:\n            x1 = x - distance;\n            y1 = y + distance;\n            break;\n          case 6:\n            x1 = x - distance;\n            y1 = y;\n            break;\n          case 7:\n            x1 = x - distance;\n            y1 = y - distance;\n            break;\n          default:\n        }\n      }\n      return { x: x1, y: y1 };\n    }\n\n    let x0 = Math.random() * width;\n    let y0 = (Math.random() * (height * 0.3)) + (height * 0.7);\n    let { x: x1, y: y1 } = { x: x0, y: y0 };\n    let { x: x2, y: y2 } = getRandomCoord({ x: x1, y: y1, direction: 0 });\n    let { x: x3, y: y3 } = getRandomCoord({ x: x2, y: y2, direction: Math.random() >= 0.5 ? 1 : 7 });\n    let direction = getRandomDirection()\n    let { x: x4, y: y4 } = getRandomCoord({ x: x3, y: y3, direction });\n    direction = getRandomDirection(direction)\n    let { x: x5, y: y5 } = getRandomCoord({ x: x4, y: y4, direction });\n    direction = getRandomDirection(direction)\n    let { x: x6, y: y6 } = getRandomCoord({ x: x5, y: y5, direction });\n    let longerStalk = Math.random() > 0.35;\n    let branchCount = Math.ceil(Math.random() * 3) + 1;\n    let plantBranches = [];\n    let dots = [];\n    let plantLeaves = [];\n    const rootStalk = `M ${x1} ${y1} C ${x2} ${y2}, ${x3} ${y3}, ${x4} ${y4}${\n      longerStalk ? ` S ${x5} ${y5} ${x6} ${y6}` : ''\n    }`;\n    setRootStalkPath(rootStalk);\n    let i = 0; // TODO: a static counter...\n    if (longerStalk) {\n      setFlower({\n        flowerGeneration: flowerGeneration.current,\n        rotate: Math.random() * 90,\n        scale: 1,\n        x: x6,\n        y: y6,\n      });\n      dots.push({\n        leaf: `flower${i}`,\n        path: rootStalk,\n      });\n    }\n  \n   for (let j=0; j < branchCount; j += 1) {\n      direction = getRandomDirection(direction, Math.random() > 0.5)\n      let { x: x7, y: y7, } = getRandomCoord({ x: x4, y: y4, direction, short: true });\n      direction = getRandomDirection(direction, Math.random() > 0.5)\n      let { x: x8, y: y8, } = getRandomCoord({ x: x7, y: y7, direction, short: true });\n      direction = getRandomDirection(direction, Math.random() > 0.5)\n      let { x: x9, y: y9, } = getRandomCoord({ x: x8, y: y8, direction, short: true });\n      direction = getRandomDirection(direction, Math.random() > 0.5)\n      let { x: x10, y: y10, } = getRandomCoord({ x: x9, y: y9, direction, short: true });\n      direction = getRandomDirection(direction, Math.random() > 0.5)\n      let { x: x11, y: y11, } = getRandomCoord({ x: x10, y: y10, direction, short: true });\n  \n      plantBranches.push(\n        <path\n          key={`branch${j}`}\n          className=\"branch stalk\"\n          d={`M ${x4} ${y4} C ${x7} ${y7}, ${x8} ${y8}, ${x9} ${y9} S ${x10} ${y10} ${x11} ${y11}`}\n          strokeWidth={(Math.random()) + 0.5}\n        />\n      );\n      setBranches(plantBranches);\n      plantLeaves.push({\n        generation: leafGeneration.current,\n        rotate: Math.random() * 360,\n        scale: 0.4,\n        x: x11,\n        y: y11,\n      });\n      setLeaves(plantLeaves);\n  \n      dots.push({\n        leaf: `plant${i}leaf${j}`,\n        path: `M ${x1} ${y1} C ${x2} ${y2}, ${x3} ${y3}, ${x4} ${y4} C ${x7} ${y7}, ${x8} ${y8}, ${\n          x9} ${y9} S ${x10} ${y10} ${x11} ${y11}`,\n      });\n      setDotPaths(dots);\n    }\n  }, [height, lineLength, width]);\n\n  function getRandomDirection(oldDirection = 0, wild = false) {\n    function getOppositeDirection(d) {\n      if (d >= 4) {\n        return d - 4;\n      }\n      return d + 4;\n    }\n    let direction = oldDirection;\n    while (direction === oldDirection || direction === getOppositeDirection(oldDirection)) {\n      direction = (Math.floor(Math.random() * (wild ? 8 : 4) + (wild ? 0 : 6))) % 8;\n    }\n    return direction;\n  }\n\n  const growListener = React.useCallback((e) => {\n    if (flower) {\n      if (flowerScale < 6) {\n        setFlowerScale(flowerScale * 1.1);\n//            flower.rotate = Math.min(Math.max(flower.rotate + (Math.random() * 30) - 15, -90), 90);\n      } else {\n        // Let's just override the potential previous one\n        const currentScale = flowerScale;\n        setFlowerScale(1);\n        setClonedFlower({\n          ...flower,\n          remove: () => {setClonedFlower(undefined)},\n          scale: currentScale,\n        });\n        flowerGeneration.current += 1;\n        setFlower({\n          ...flower,\n          generation: flowerGeneration.current,\n        });\n      }\n    }\n    if (leafScale < 5) {\n      setLeafScale(leafScale * 1.1);\n      setLeaves([...leaves.map(l => ({\n        ...l,\n        rotate: Math.min(Math.max(l.rotate + (Math.random() * 30) - 15, -360), 360),\n      }))]);\n    } else {\n      setClonedLeaves([...leaves.map(l => ({\n        ...l,\n        scale: leafScale,\n      }))]);\n      leafGeneration.current += 1;\n      setLeaves([...leaves.map(l => ({\n        ...l,\n        generation: leafGeneration.current,\n        rotate: Math.min(Math.max(l.rotate + (Math.random() * 30) - 15, -360), 360),\n      }))]);\n      setLeafScale(0.4);\n    }\n  }, [flower, flowerGeneration, flowerScale, leafGeneration, leafScale, leaves]);\n\n  React.useLayoutEffect(() => {\n    const node = animationListener.current;\n    if (node) {\n      node.addEventListener('repeatEvent', growListener);\n      return (() => {\n        node.removeEventListener('repeatEvent', growListener);\n      })\n    }\n  }, [animationListener, growListener]);\n\n  return (\n    <g className=\"plant\">\n      <path\n        className=\"root stalk\"\n        d={rootStalkPath}\n        strokeWidth=\"2.5\"\n      />\n      {branches}\n      {animated && dotPaths.map((p, i) => (\n        <circle key={`pulse-${i}`} fill=\"red\" r=\"2\" >\n          <animateMotion\n            dur={`${animationDuration}s`}\n            repeatCount=\"indefinite\"\n            data-leaf={p.leaf}\n            path={p.path}\n            ref={i === 0 ? animationListener : undefined}\n          />\n        </circle>\n     ))}\n      {leaves.map((l, i) => <Leaf key={`leaf-${i}`} {...l} scale={leafScale} />)}\n      {clonedLeaves.map((l, i) => (<Leaf key={`leaf-${i}-clone`} {...l} fading={true} />))}\n      {flower && <Flower {...flower} scale={flowerScale} />}\n      {clonedFlower && <Flower {...clonedFlower} fading={true} className=\"fade\" />}\n    </g>\n  );\n};\n\nconst Background = React.forwardRef((props, ref) => {\n  const {\n    animated: animatedParam = true,\n    children,\n    dimmed,\n    height: heightParam,\n    location = {},\n    pageContext,\n    pageResources,\n    params,\n    path,\n    plantCount: plantCountParam = 17,\n    serverData,\n    speed: speedParam = 1,\n    uri,\n    width: widthParam,\n    ...rest // This is what we really want...\n  } = props;\n  const { search } = location;\n\n  const [width, setWidth] = React.useState(widthParam);\n  const [height, setHeight] = React.useState(heightParam);\n  const [plantCount, setplantCount] = React.useState(plantCountParam);\n  const [animated, setAnimated] = React.useState(animatedParam);\n  const [speed, setSpeed] = React.useState(speedParam);\n\n  const animationDuration = 10 / speed;\n  const fadeDuration = animationDuration * 2;\n\n  React.useEffect(() => {\n    const searchParams = new URLSearchParams(search);\n    if (!width) {\n      if (searchParams.has('width')) {\n        setWidth(+searchParams.get('width'));\n      } else {\n        setWidth(typeof window !== `undefined` ? window.innerWidth : 2560);\n      }\n    }\n    if (!height) {\n      if (searchParams.has('height')) {\n        setHeight(+searchParams.get('height'));\n      } else {\n        setHeight(typeof window !== `undefined` ? window.innerHeight : 1440);\n      }\n    }\n    if (searchParams.has('plants')) {\n      setplantCount(+searchParams.get('plants'));\n    }\n    if (searchParams.has('animated')) {\n      const animatedParam = searchParams.get('animated').toLowerCase();\n      setAnimated(!['false', 'no', 'not'].some(v => v === animatedParam));\n    }\n    if (searchParams.has('speed')) {\n      setSpeed(+searchParams.get('speed'));\n    }\n  }, [height, search, setAnimated, setHeight, setplantCount, setSpeed, setWidth, width]);\n\n  if (width === undefined) {\n    return null;\n  }\n\n  const style = `\n    #plantBackground * {\n      transition: transform 0.6s ease-in-out, fill ${fadeDuration}s ease-in-out, fill-opacity ${fadeDuration * 3}s ease-in-out;\n    }\n    #plantBackground line {\n      stroke-width: 0.5px;\n      stroke: #010259;\n      stroke-opacity: 0.4;\n    }\n    #plantBackground .stalk {\n      fill: none;\n      stroke: green;\n    }\n    #plantBackground .leaf, #plantBackground .flower, #plantBackground .about-to-fade {\n      fill: green;\n      fill-opacity: 1;\n    }\n    #plantBackground .fading {\n      fill: yellow;\n      fill-opacity: 0;\n    }${ dimmed\n      ? `\n    #plantBackground g {\n      opacity: 0.65;\n    }\n    `\n      : ''\n    }\n    #plantBackground .about-to-fade {\n      transition: transform 0s ease-in-out, fill 0s ease-in-out, fill-opacity 0s ease-in-out\n    }\n\n    @media screen and (prefers-reduced-motion: reduce) {\n      #plantBackground * {\n        animation: none !important;\n      }\n      #plantBackground circle {\n        display: none;\n      }\n    }\n    @media print {\n      #plantBackground circle {\n        display: none;\n      }\n    }\n  `;\n\n  return (\n    <svg\n      id=\"plantBackground\"\n      ref={ref}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={`${width}px`}\n      height={`${height}px`}\n      viewBox={`0 0 ${width} ${height}`}\n      preserveAspectRatio=\"xMidYMid slice\"\n      {...rest}\n    >\n      <defs>\n        <style>{style}</style>\n        <path id=\"leaf\" className=\"leaf\" d=\"M20,0 a10 10 0 0 1 0 20 a10 10 0 0 1 -20 0 v-20 Z\" />\n        <path id=\"flower\" className=\"leaf\" d=\"M0,0 a10 10 0 0 1 0 20 a10 10 0 0 1 -20 0 a10 10 0 0 1 0 -20 a10 10 0 0 1 20 0 Z\" />\n      </defs>\n      {Array.from(Array(plantCount)).map((d, i) => (\n        <Plant\n          key={`plant-${i}`}\n          animated={animated}\n          animationDuration={animationDuration}\n          height={height}\n          width={width}\n        />\n      ))}\n    </svg>\n  )\n});\n\nexport default Background;\n"],"names":["Leaf","_ref","fading","generation","rotate","scale","x","y","isFading","setFading","React","setTimeout","key","transform","className","d","Flower","_ref2","remove","f","onTransitionEnd","e","propertyName","Plant","_ref3","animated","animationDuration","height","width","lineLength","flowerGeneration","leafGeneration","animationListener","flowerScale","setFlowerScale","leafScale","setLeafScale","rootStalkPath","setRootStalkPath","flower","setFlower","undefined","clonedFlower","setClonedFlower","branches","setBranches","leaves","setLeaves","clonedLeaves","setClonedLeaves","dotPaths","setDotPaths","getRandomDirection","oldDirection","wild","direction","Math","floor","random","getRandomCoord","_ref4","short","distance","x1","y1","counter","x0","y0","x2","y2","x3","y3","x4","y4","x5","y5","x6","y6","longerStalk","branchCount","ceil","plantBranches","dots","plantLeaves","rootStalk","current","push","leaf","path","j","x7","y7","x8","y8","x9","y9","x10","y10","x11","y11","strokeWidth","growListener","currentScale","_toConsumableArray","map","l","min","max","node","addEventListener","removeEventListener","p","i","fill","r","dur","repeatCount","ref","Object","assign","Background","props","animatedParam","children","dimmed","heightParam","location","pageContext","pageResources","params","plantCount","plantCountParam","serverData","speed","speedParam","uri","widthParam","rest","search","setWidth","setHeight","setplantCount","setAnimated","setSpeed","fadeDuration","searchParams","URLSearchParams","has","get","window","innerWidth","innerHeight","toLowerCase","some","v","style","id","xmlns","viewBox","preserveAspectRatio","Array","from"],"sourceRoot":""}